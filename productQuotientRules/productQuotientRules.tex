\documentclass{ximera}

\input{../preamble.tex}

\title{3.2 - The Product and Quotient Rules}

\begin{document}
\begin{abstract}
\end{abstract}
\maketitle

Remember our sum rule for derivatives: $(f(x)+g(x))'=f'(x)+g'(x)$. Based on this, you may be tempted to imagine a similar rule for the product of two functions:

  \[
  \frac{d}{dx} \left(f(x)\cdot g(x)\right) = f'(x) \cdot g'(x)?
  \]

Here is an example that shows why it is not this simple. Using our ``rule":

  \[
  f(x) = x^2+1\qquad\text{and}\qquad g(x) = x^3-3x
  \]
  Now
  \begin{align*}
    f'(x)g'(x) &= (2x)(3x^2-3)\\
    &= 6x^3-6x.
  \end{align*}

However, if we multiply it out and then use rules we already know to be true:

  \begin{align*}
    f(x)g(x) &= (x^2+1)(x^3-3x)\\
    &=x^5-3x^3+x^3-3x\\
    &=x^5-2x^3-3x.
  \end{align*} 

Therefore

  \[
  \frac{d}{dx} \left(f(x) \cdot g(x)\right) = 5x^4-6x^2-3.
  \]
Overall, the idea we had $  \frac{d}{dx} \left(f(x)\cdot g(x)\right) = f'(x) \cdot g'(x)?$ does not work. Can we find out a rule that does work?

\section{The product rule}

\begin{theorem}[The product rule]\index{derivative rules!product}\index{product rule}\label{theorem:product-rule}
If $f$ and $g$ are differentiable, then
\[
\frac{d}{dx} f(x)g(x) = f(x)g'(x)+f'(x)g(x).
\]
\end{theorem}


%% \begin{image}
%% \begin{tikzpicture}
%% 	\begin{axis}[
%%             clip=false,
%%             domain=1.5:6, 
%%             ytickmin=1,ytickmax=0,
%%             xtick={4},ytickmin=1,ytickmax=0,
%%             xticklabels={$a$},
%%             ymin=0, ymax=6,
%%             xlabel=$x$, ylabel=$y$,
%%             axis lines=center,
%%             every axis y label/.style={at=(current axis.above origin),anchor=south},
%%             every axis x label/.style={at=(current axis.right of origin),anchor=west},
%%             axis on top,
%%           ]          
%%           %\addplot [dashed, textColor] plot coordinates {(4,0) (4,3.08)};
%%           %\node at (axis cs:4,0) [anchor=north] {$x$};

%%           \addplot [penColor5,very thick] plot coordinates {(5,1.4) (5,1.9)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,1.4) (5,1.4)};

%%           \addplot [penColor4,very thick] plot coordinates {(5,2.2) (5,2.6)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,2.2) (5,2.2)};

%%           \addplot [very thick, penColor5!50!penColor2] plot coordinates {(5,3.08) (5,4.18)};
%%           \addplot [very thick, penColor4!50!penColor] plot coordinates {(5,4.18) (5,4.74)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(4,3.08) (5,3.08)};
        
%%           \addplot [very thick,penColor,smooth] {-.6+.5*x};
%%           \addplot [very thick,penColor2,smooth] {.6+.4*x};         
%%           \addplot [very thick,penColor3,smooth,domain=1:5.5] {-.36+.06*x+.2*x^2};      
%%           \addplot [penColor3!70!background,smooth, domain=1.6:5.6] {-3.56+1.66*x};      
          
%%           \addplot [dashed, textColor] plot coordinates {(4,0) (4,3.08)};

%%           \node at (axis cs:3.5,1.1) [anchor=north,penColor] {$f(x)$};
%%           \node at (axis cs:2,1.95) [anchor=north,penColor2] {$g(x)$};
%%           \node at (axis cs:4.7,4.3) [anchor=east,penColor3] {$f(x)g(x)$};

%%           \node at (axis cs:5,3.91) [anchor=west] {${\color{penColor}f(a)}{\color{penColor4}g'(a)h}+{\color{penColor5}f'(a)h}{\color{penColor2}g(a)} + {\color{penColor5}f'(a)h}{\color{penColor4}g'(a)h}$};
%%           \node at (axis cs:5,1.65) [anchor=west,penColor5] {$f'(a)h$};
%%           \node at (axis cs:5,2.4) [anchor=west,penColor4] {$g'(a)h$};
%%           \node at (axis cs:4.5,1.5) [anchor=north] {$\underbrace{\hspace{.40in}}_{h}$};

%%           \addplot[color=penColor,fill=penColor,only marks,mark=*] coordinates{(4,1.4)};  %% closed hole          
%%           \addplot[color=penColor2,fill=penColor2,only marks,mark=*] coordinates{(4,2.2)};  %% closed hole          
%%           \addplot[color=penColor3,fill=penColor3,only marks,mark=*] coordinates{(4,3.08)};  %% closed hole          
%%         \end{axis}
%% \end{tikzpicture}
%% %% \caption[A geometric interpretation of the product rule.]{A geometric interpretation of the product rule. Since every
%% %%   point on $f(x)g(x)$ is the product of the corresponding points on
%% %%   $f(x)$ and $g(x)$, increasing $a$ by a ``small amount'' $h$,
%% %%   increases $f(a)g(a)$ by the sum of $f(a)g'(a)h$ and
%% %%   $f'(a)hg(a)$. Hence,
%% %% \begin{align*}
%% %% \frac{\Delta y}{\Delta x} &\approx \frac{f(a)g'(a)h+f'(a)g(a)h + f'(a)g'(a)h^2}{h}\\
%% %% &\approx f(a)g'(a) + f'(a)g(a).
%% %% \end{align*}}
%% \end{image}

%% \begin{explanation}
%% From the limit definition of the derivative, write
%% \[
%% \frac{d}{dx} (f(x)g(x)) = \lim_{h \to0} \frac{f(\answer[given]{x+h})g(\answer[given]{x+h}) - f(\answer[given]{x})g(\answer[given]{x})}{\answer[given]{h}}
%% \]
%% Now we use a trick, we add $0 = -f(x+h)g(x) + f(x+h)g(x)$:
%% \begin{align*}
%% &=\lim_{h \to0} \frac{f(x+h)g(x+h){\color{penColor2}-f(x+h)g(x) + f(x+h)g(x)}- f(x)g(x)}{h} \\ 
%% &=\lim_{h \to0} \frac{f(x+h)g(x+h)-f(x+h)g(x)}{h} + \lim_{h \to0} \frac{f(x+h)g(x)- f(x)g(x)}{h}.
%% \end{align*}
%% Since both $f(x)$ and $g(x)$ are differentiable, they are
%% continuous, see Theorem~\ref{theorem:diff-cont}. Hence
%% \begin{align*}
%% &=\lim_{h \to0} \left(f(x+h)\frac{g(x+h)-g(x)}{h}\right) + \lim_{h \to0} \left(\frac{f(x+h)- f(x)}{h}g(x)\right) \\ 
%% &=\lim_{h \to0} f(x+h)\lim_{h \to0}\cdot \frac{g(x+h)-g(x)}{h} + \lim_{h \to0} \frac{f(x+h)- f(x)}{h} \cdot \lim_{h \to0}g(x) \\ 
%% &=f(x)g'(x) + f'(x)g(x).
%% \end{align*}
%% \end{explanation}

Let's apply this rule to the previous example. If this rule is correct, it should be able to give us the same answer we got before by multiplying before taking the derivative.
\begin{example} 
Let $f(x)=(x^2+1)$ and $g(x)=(x^3-3x)$. Compute:
\[
\frac{d}{dx} f(x)g(x)
\]

\begin{explanation}
Write with me
\begin{align*}
\frac{d}{dx} f(x)g(x) &= f(x)g'(x) + f'(x)g(x)\\
&=(x^2+1)(\answer[given]{3x^2-3}) + (\answer[given]{2x})(x^3-3x).
\end{align*}
We could stop here, but we should show that expanding this out recovers
our previous result. Write with me
\begin{align*}
(x^2+1)&(3x^2-3) + 2x(x^3-3x)\\
  &= 3x^4-3x^2 +3x^2 -3 + 2x^4-6x^2\\
&=\answer[given]{5x^4-6x^2-3},
\end{align*}
which is precisely what we obtained before.
\end{explanation}
\end{example}

Now that we are pros, let's try one more example.


\begin{example}
	Suppose $f$ is a function whose values are given in the following table.
	\begin{center}
		\begin{tabular}{c c c}
			\hline \hline
			x & f(x) & f'(x) \\ 
			\hline
			1 & -3 & 4\\
			2 & 5 & -1\\
			3 & 2 & 0\\
			\hline
		\end{tabular}		
	\end{center}
		
	Compute $\eval{ \frac{d}{dx}\left( (x^2+1) f(x) \right)}_{x=2}$.
	\begin{explanation}
	Using the product rule, write with me.
	\begin{align*}
		\frac{d}{dx}\left( (x^2+1) f(x) \right) &= \frac{d}{dx} \left( \answer[given]{x^2+1} \right) \cdot f(x) + (x^2+1) \cdot \frac{d}{dx}\left( \answer[given]{f(x)} \right) \\
			&= \left( \answer[given]{2x} \right) \cdot f(x) + (x^2+1) \cdot \frac{d}{dx} \left( f(x) \right)
	\end{align*}
	
	Plugging in $x=2$ yields:
	\begin{align*}
		\eval{ \frac{d}{dx}\left( (x^2+1) f(x) \right) }_{x=2} &= \left( \answer[given]{4} \right) \cdot f\left( \answer[given]{2} \right) + \left( \answer[given]{5} \right) \cdot f'\left( \answer[given]{2} \right)\\	
			&= 4 \cdot \answer[given]{5} + 5 \cdot \answer[given]{-1}\\
			&= \answer[given]{15}
	\end{align*}
	\end{explanation}
\end{example}



\section{The quotient rule}


We'd like to have a formula to compute
\[
\frac{d}{dx} \frac{f(x)}{g(x)}.
\]
%if we already know $f'(x)$ and $g'(x)$. Instead of attacking this
%problem head-on, let's notice that we've already done part of the
%problem: $f(x)/g(x)= f(x)\cdot(1/g(x))$, that is, this is really a
%product, and we can compute the derivative if we know $f'(x)$ and
%$(1/g(x))'$. 
This brings us to our next derivative rule.

\begin{theorem}[The quotient rule]\index{derivative rules!quotient}\index{quotient rule}\label{theorem:quotient-rule}
If $f$ and $g$ are differentiable, then
\[
\frac{d}{dx} \frac{f(x)}{g(x)} = \frac{f'(x)g(x)-f(x)g'(x)}{g(x)^2}.
\]
\end{theorem}
%% \begin{explanation}
%% First note that if we knew how to compute
%% \[
%% \frac{d}{dx} \frac{1}{g(x)}
%% \]
%% then we could use the product rule to complete our explanation.  Write
%% \begin{align*}
%% \frac{d}{dx}\frac{1}{g(x)}&=\lim_{h\to0} \frac{\frac{1}{g(x+h)}-\frac{1}{g(x)}}{h} \\
%% &=\lim_{h\to0} \frac{\frac{g(\answer[given]{x})-g(\answer[given]{x+h})}{g(x+h)g(x)}}{h} \\
%% &=\lim_{h\to0} \frac{g(x)-g(x+h)}{g(x+h)g(x)h} \\
%% &=\lim_{h\to0} -\frac{g(x+h)-g(x)}{h} \frac{1}{g(x+h)g(x)} \\
%% &=-\frac{g'(x)}{g(x)^2}.
%% \end{align*}
%% Now we can put this together with the product rule:
%% \begin{align*}
%% \frac{d}{dx}\frac{f(x)}{g(x)} &=f(x)\frac{-g'(x)}{g(x)^2}+f'(x)\frac{1}{g(x)}\\
%% &=\frac{-f(x)g'(x)+f'(x)g(x)}{g(x)^2}\\
%% &=\frac{f'(x)g(x)-f(x)g'(x)}{g(x)^2}.
%% \end{align*}

%% \end{explanation}


\begin{example}
Compute:
\[
\frac{d}{dx} \frac{x^2+1}{x^3-3x}
\]

\begin{explanation}
Write with me
\begin{align*}
\frac{d}{dx} \frac{x^2+1}{x^3-3x} &= \frac{2x(\answer[given]{x^3-3x})-(\answer[given]{x^2+1})(3x^2-3)}{(\answer[given]{x^3-3x})^2}\\
&=\frac{-x^4-6x^2+3}{(\answer[given]{x^3-3x})^2}.
\end{align*}
\end{explanation}
\end{example}

It is often possible to calculate derivatives in more than one way, as
we have already seen. Since every quotient can be written as a
product, it is always possible to use the product rule to compute the
derivative, though it is not always simpler.

\begin{example}
Compute: 
\[
\frac{d}{dx} \frac{625-x^2}{\sqrt{x}}
\] 
in two ways. First using the quotient rule and then using the product
rule.
\begin{explanation}
First, we'll compute the derivative using the quotient rule. Write with me
\[
\frac{d}{dx} \frac{625-x^2}{\sqrt{x}} = \frac{\left(-2x\right)\left(\answer[given]{\sqrt{x}}\right) - (\answer[given]{625-x^2})\left(\frac{1}{2}x^{-1/2}\right)}{\answer[given]{x}}.
\]

Second, we'll compute the derivative using the product rule:
\begin{align*}
\frac{d}{dx} \frac{625-x^2}{\sqrt{x}} &= \frac{d}{dx} \left(625-x^2\right)x^{-1/2}\\
=\left(625-x^2\right)&\left(\answer[given]{\frac{-x^{-3/2}}{2}}\right)+ (\answer[given]{-2x})\left(x^{-1/2}\right).
\end{align*}
With a bit of algebra, both of these simplify to
\[
-\frac{3x^2+625}{2x^{3/2}}.
\]
\end{explanation}
\end{example}

Let's finish up with one more, mixing the rules together.
\begin{example}
	Suppose $f$ is a function whose values are given in the following table.
	\begin{center}
		\begin{tabular}{c c c}
			\hline \hline
			x & f(x) & f'(x) \\ 
			\hline
			1 & -3 & 4\\
			2 & 5 & -1\\
			3 & 2 & 0\\
			\hline
		\end{tabular}		
	\end{center}
		
	Compute $\eval{ \frac{d}{dx}\left( \frac{x f(x)}{x+1} \right)}_{x=2}$.
	\begin{explanation}
	The `Outside Operation' is a quotient, so we'll start with the quotient rule.  Notice that the numerator is a product?  That means we'll have to use product rule, too.
	\begin{align*}
		\frac{d}{dx}\left( \frac{x f(x)}{x+1} \right) &= \frac{\frac{d}{dx}\left(x f(x)\right) \left(\answer[given]{x+1}\right) - \left( x f(x) \right) \frac{d}{dx} \left(x+1\right)}{\answer[given]{(x+1)^2}}\\
			&= \frac{\left( \frac{d}{dx}(x) f(x) + x\frac{d}{dx}\left(f(x)\right) \right) (x+1) - \left( x f(x) \right) \left( \answer[given]{1}\right)}{(x+1)^2}\\
			&= \frac{\left( f(x) + x f'(x) \right) (x+1) - x f(x)}{(x+1)^2}		
	\end{align*}
	
	Plugging $x=2$ into this yields:
	\begin{align*}
		\eval{ \frac{d}{dx}\left( \frac{x f(x)}{x+1} \right)}_{x=2} 
			&= \frac{\left( f\left(\answer[given]{2}\right) + 2 f'\left(\answer[given]{2}\right) \right) \left(\answer[given]{3}\right) - \answer[given]{2} f\left(\answer[given]{2}\right)}{\answer[given]{9}} \\
			&= \frac{\left( 5 + 2 (\answer[given]{-1})\right) (3) - 2 (5)}{9} \\
			&= \answer[given]{\frac{-1}{9}}
	\end{align*}
	\end{explanation}
\end{example}

\end{document}